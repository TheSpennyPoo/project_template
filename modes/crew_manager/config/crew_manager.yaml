#config_version=6
##! mode: crew_manager

mode:
    start_events: ball_started, mode_slurm_factory_stopped, delivery_ended
    stop_events: found_golden_cap, ball_ending, delivery_started
    priority: 105

state_machines:
    fry_level_advancement:
        persist_state: true
        states:
            start:
                label: Start state
                events_when_started: fry_level1
            fry_level2:
                events_when_started: fry_level2
            fry_level3:
                events_when_started: fry_level3
            fry_level4:
                events_when_started: fry_level4
            fry_level5:
                events_when_started: fry_level5
            fry_level6:
                events_when_started: fry_level6
            fry_level7:
                events_when_started: fry_level7
        transitions:
            - source: start
              target: fry_level2
              events: s_t_fry_active{current_player.fry_xp > machine.level_2_xp}
            - source: fry_level2
              target: fry_level3
              events: s_t_fry_active{current_player.fry_xp > machine.level_3_xp}
            - source: fry_level3
              target: fry_level4
              events: s_t_fry_active{current_player.fry_xp > machine.level_4_xp}
            - source: fry_level4
              target: fry_level5
              events: s_t_fry_active{current_player.fry_xp > machine.level_5_xp}
            - source: fry_level5
              target: fry_level6
              events: s_t_fry_active{current_player.fry_xp > machine.level_6_xp}
            - source: fry_level6
              target: fry_level7
              events: s_t_fry_active{current_player.fry_xp > machine.level_7_xp}
    leela_level_advancement:
        persist_state: true
        states:
            start:
                label: Start state
                events_when_started: leela_level1
            leela_level2:
                events_when_started: leela_level2
            leela_level3:
                events_when_started: leela_level3
            leela_level4:
                events_when_started: leela_level4
            leela_level5:
                events_when_started: leela_level5
            leela_level6:
                events_when_started: leela_level6
            leela_level7:
                events_when_started: leela_level7
        transitions:
            - source: start
              target: leela_level2
              events: s_t_leela_active{current_player.leela_xp > machine.level_2_xp}
            - source: leela_level2
              target: leela_level3
              events: s_t_leela_active{current_player.leela_xp > machine.level_3_xp}
            - source: leela_level3
              target: leela_level4
              events: s_t_leela_active{current_player.leela_xp > machine.level_4_xp}
            - source: leela_level4
              target: leela_level5
              events: s_t_leela_active{current_player.leela_xp > machine.level_5_xp}
            - source: leela_level5
              target: leela_level6
              events: s_t_leela_active{current_player.leela_xp > machine.level_6_xp}
            - source: leela_level6
              target: leela_level7
              events: s_t_leela_active{current_player.leela_xp > machine.level_7_xp}
    bender_level_advancement:
        persist_state: true
        states:
            start:
                label: Start state
                events_when_started: bender_level1
            bender_level2:
                events_when_started: bender_level2
            bender_level3:
                events_when_started: bender_level3
            bender_level4:
                events_when_started: bender_level4
            bender_level5:
                events_when_started: bender_level5
            bender_level6:
                events_when_started: bender_level6
            bender_level7:
                events_when_started: bender_level7
        transitions:
            - source: start
              target: bender_level2
              events: s_t_bender_active{current_player.bender_xp > machine.level_2_xp}
            - source: bender_level2
              target: bender_level3
              events: s_t_bender_active{current_player.bender_xp > machine.level_3_xp}
            - source: bender_level3
              target: bender_level4
              events: s_t_bender_active{current_player.bender_xp > machine.level_4_xp}
            - source: bender_level4
              target: bender_level5
              events: s_t_bender_active{current_player.bender_xp > machine.level_5_xp}
            - source: bender_level5
              target: bender_level6
              events: s_t_bender_active{current_player.bender_xp > machine.level_6_xp}
            - source: bender_level6
              target: bender_level7
              events: s_t_bender_active{current_player.bender_xp > machine.level_7_xp}
    nibbler_level_advancement:
        persist_state: true
        states:
            start:
                label: Start state
                events_when_started: nibbler_level1
            nibbler_level2:
                events_when_started: nibbler_level2
            nibbler_level3:
                events_when_started: nibbler_level3
            nibbler_level4:
                events_when_started: nibbler_level4
            nibbler_level5:
                events_when_started: nibbler_level5
            nibbler_level6:
                events_when_started: nibbler_level6
            nibbler_level7:
                events_when_started: nibbler_level7
        transitions:
            - source: start
              target: nibbler_level2
              events: s_dt_nibbler_active{current_player.nibbler_xp > machine.level_2_xp}
            - source: nibbler_level2
              target: nibbler_level3
              events: s_dt_nibbler_active{current_player.nibbler_xp > machine.level_3_xp}
            - source: nibbler_level3
              target: nibbler_level4
              events: s_dt_nibbler_active{current_player.nibbler_xp > machine.level_4_xp}
            - source: nibbler_level4
              target: nibbler_level5
              events: s_dt_nibbler_active{current_player.nibbler_xp > machine.level_5_xp}
            - source: nibbler_level5
              target: nibbler_level6
              events: s_dt_nibbler_active{current_player.nibbler_xp > machine.level_6_xp}
            - source: nibbler_level6
              target: nibbler_level7
              events: s_dt_nibbler_active{current_player.nibbler_xp > machine.level_7_xp}
    zoidberg_level_advancement:
        persist_state: true
        states:
            start:
                label: Start state
                events_when_started: zoidberg_level1
            zoidberg_level2:
                events_when_started: zoidberg_level2
            zoidberg_level3:
                events_when_started: zoidberg_level3
            zoidberg_level4:
                events_when_started: zoidberg_level4
            zoidberg_level5:
                events_when_started: zoidberg_level5
            zoidberg_level6:
                events_when_started: zoidberg_level6
            zoidberg_level7:
                events_when_started: zoidberg_level7
        transitions:
            - source: start
              target: zoidberg_level2
              events: s_dt_zoidberg_active{current_player.zoidberg_xp > machine.level_2_xp}
            - source: zoidberg_level2
              target: zoidberg_level3
              events: s_dt_zoidberg_active{current_player.zoidberg_xp > machine.level_3_xp}
            - source: zoidberg_level3
              target: zoidberg_level4
              events: s_dt_zoidberg_active{current_player.zoidberg_xp > machine.level_4_xp}
            - source: zoidberg_level4
              target: zoidberg_level5
              events: s_dt_zoidberg_active{current_player.zoidberg_xp > machine.level_5_xp}
            - source: zoidberg_level5
              target: zoidberg_level6
              events: s_dt_zoidberg_active{current_player.zoidberg_xp > machine.level_6_xp}
            - source: zoidberg_level6
              target: zoidberg_level7
              events: s_dt_zoidberg_active{current_player.zoidberg_xp > machine.level_7_xp}
    professor_level_advancement:
        persist_state: true
        states:
            start:
                label: Start state
                events_when_started: professor_level1
            professor_level2:
                events_when_started: professor_level2
            professor_level3:
                events_when_started: professor_level3
            professor_level4:
                events_when_started: professor_level4
            professor_level5:
                events_when_started: professor_level5
            professor_level6:
                events_when_started: professor_level6
            professor_level7:
                events_when_started: professor_level7
        transitions:
            - source: start
              target: professor_level2
              events: s_dt_professor_active{current_player.professor_xp > machine.level_2_xp}
            - source: professor_level2
              target: professor_level3
              events: s_dt_professor_active{current_player.professor_xp > machine.level_3_xp}
            - source: professor_level3
              target: professor_level4
              events: s_dt_professor_active{current_player.professor_xp > machine.level_4_xp}
            - source: professor_level4
              target: professor_level5
              events: s_dt_professor_active{current_player.professor_xp > machine.level_5_xp}
            - source: professor_level5
              target: professor_level6
              events: s_dt_professor_active{current_player.professor_xp > machine.level_6_xp}
            - source: professor_level6
              target: professor_level7
              events: s_dt_professor_active{current_player.professor_xp > machine.level_7_xp}
    amy_level_advancement:
        persist_state: true
        states:
            start:
                label: Start state
                events_when_started: amy_level1
            amy_level2:
                events_when_started: amy_level2
            amy_level3:
                events_when_started: amy_level3
            amy_level4:
                events_when_started: amy_level4
            amy_level5:
                events_when_started: amy_level5
            amy_level6:
                events_when_started: amy_level6
            amy_level7:
                events_when_started: amy_level7
        transitions:
            - source: start
              target: amy_level2
              events: s_dt_amy_active{current_player.amy_xp > machine.level_2_xp}
            - source: amy_level2
              target: amy_level3
              events: s_dt_amy_active{current_player.amy_xp > machine.level_3_xp}
            - source: amy_level3
              target: amy_level4
              events: s_dt_amy_active{current_player.amy_xp > machine.level_4_xp}
            - source: amy_level4
              target: amy_level5
              events: s_dt_amy_active{current_player.amy_xp > machine.level_5_xp}
            - source: amy_level5
              target: amy_level6
              events: s_dt_amy_active{current_player.amy_xp > machine.level_6_xp}
            - source: amy_level6
              target: amy_level7
              events: s_dt_amy_active{current_player.amy_xp > machine.level_7_xp}
    hermes_level_advancement:
        persist_state: true
        states:
            start:
                label: Start state
                events_when_started: hermes_level1
            hermes_level2:
                events_when_started: hermes_level2
            hermes_level3:
                events_when_started: hermes_level3
            hermes_level4:
                events_when_started: hermes_level4
            hermes_level5:
                events_when_started: hermes_level5
            hermes_level6:
                events_when_started: hermes_level6
            hermes_level7:
                events_when_started: hermes_level7
        transitions:
            - source: start
              target: hermes_level2
              events: s_dt_hermes_active{current_player.hermes_xp > machine.level_2_xp}
            - source: hermes_level2
              target: hermes_level3
              events: s_dt_hermes_active{current_player.hermes_xp > machine.level_3_xp}
            - source: hermes_level3
              target: hermes_level4
              events: s_dt_hermes_active{current_player.hermes_xp > machine.level_4_xp}
            - source: hermes_level4
              target: hermes_level5
              events: s_dt_hermes_active{current_player.hermes_xp > machine.level_5_xp}
            - source: hermes_level5
              target: hermes_level6
              events: s_dt_hermes_active{current_player.hermes_xp > machine.level_6_xp}
            - source: hermes_level6
              target: hermes_level7
              events: s_dt_hermes_active{current_player.hermes_xp > machine.level_7_xp}


event_player:
#crew level_up perks+prizes
    bender_level2: light_suicide_booth
    fry_level3: light_suicide_booth
    bender_level4: light_suicide_booth
    fry_level5: light_suicide_booth
    professor_level2: start_pazuzu_ball_save
    professor_level3: dark_matter_extra_ball
    professor_level4: start_pazuzu_ball_save
    amy_level2: amy_PF_multiplier_start
    amy_level3: amy_PF_multiplier_start
    amy_level4: amy_PF_multiplier_start
    nibbler_level3: nibbler_poop

show_player:
    fry_level2:
        fry_level_up_show:
            loops: 0
            show_tokens:
                level: fry_level_up2
                points: 500_points
                award2: fry_multiplier_plus
                award3: crew_multiplier_plus
                award4: blank_award
    fry_level3:
        fry_level_up_show:
            loops: 0
            show_tokens:
                level: fry_level_up3
                points: 1000_points
                award2: fry_multiplier_plus
                award3: blank_award
                award4: award_suicide_booth
    leela_level2:
        leela_level_up_show:
            loops: 0
            show_tokens:
                level: leela_level_up2
                points: 500_points
                award2: leela_multiplier_plus
                award3: crew_multiplier_plus
                award4: blank_award
    leela_level3:
        leela_level_up_show:
            loops: 0
            show_tokens:
                level: leela_level_up3
                points: 1000_points
                award2: leela_multiplier_plus
                award3: blank_award
                award4: blank_award2
    bender_level2:
        bender_level_up_show:
            loops: 0
            show_tokens:
                level: bender_level_up2
                points: 500_points
                award2: bender_multiplier_plus
                award3: crew_multiplier_plus
                award4: award_suicide_booth
    bender_level3:
        bender_level_up_show:
            loops: 0
            show_tokens:
                level: bender_level_up3
                points: 1000_points
                award2: bender_multiplier_plus
                award3: blank_award
                award4: blank_award2
    nibbler_level2:
        nibbler_level_up_show:
            loops: 0
            show_tokens:
                level: nibbler_level_up2
                points: 500_points
                award2: nibbler_multiplier_plus
                award3: crew_multiplier_plus
                award4: blank_award
    nibbler_level3:
        nibbler_level_up_show:
            loops: 0
            show_tokens:
                level: nibbler_level_up3
                points: 1000_points
                award2: nibbler_multiplier_plus
                award3: ball_of_dark_matter
                award4: blank_award
    amy_level2:
        amy_level_up_show:
            loops: 0
            show_tokens:
                level: amy_level_up2
                points: 500_points
                award2: amy_multiplier_plus
                award3: crew_multiplier_plus
                award4: PF_multiplier_plus_slot4
    amy_level3:
        amy_level_up_show:
            loops: 0
            show_tokens:
                level: amy_level_up3
                points: 1000_points
                award2: amy_multiplier_plus
                award3: PF_multiplier_plus_slot3
                award4: blank_award

slides:
    amy_level_up_slide:
        widgets:
            - type: image
              image: amy_level_up_BG
              z: 1
    hermes_level_up_slide:
        widgets:
            - type: image
              image: hermes_level_up_BG
              z: 1
    zoidberg_level_up_slide:
        widgets:
            - type: image
              image: zoidberg_level_up_BG
              z: 1
    professor_level_up_slide:
        widgets:
            - type: image
              image: professor_level_up_BG
              z: 1
    nibbler_level_up_slide:
        widgets:
            - type: image
              image: nibbler_level_up_BG
              z: 1
    leela_level_up_slide:
        widgets:
            - type: image
              image: leela_level_up_BG
              z: 1
    fry_level_up_slide:
        widgets:
            - type: image
              image: fry_level_up_BG
              z: 1
    bender_level_up_slide:
        widgets:
            - type: image
              image: bender_level_up_BG
              z: 1

widgets:
#because of limitations on shows and show_tokens, this is the only way I found
#to call text to an existing slide as part of a show, unfortunately each
#string requires its own widget, but at least some are reuseable...
    fry_level_up2:
        - type: text
          text: Fry Level 2!
          style: level_up_header
          z: 2
    fry_level_up3:
        - type: text
          text: Fry Level 3!
          style: level_up_header
          z: 2
    leela_level_up2:
        - type: text
          text: Leela Level 2!
          style: level_up_header
          z: 2
    leela_level_up3:
        - type: text
          text: Leela Level 3!
          style: level_up_header
          z: 2
    bender_level_up2:
        - type: text
          text: Bender Level 2!
          style: level_up_header
          z: 2
    bender_level_up3:
        - type: text
          text: Bender Level 3!
          style: level_up_header
          z: 2
    nibbler_level_up2:
        - type: text
          text: Nibbler Level 2!
          style: level_up_header
          z: 2
    nibbler_level_up3:
        - type: text
          text: Nibbler Level 3!
          style: level_up_header
          z: 2
    amy_level_up2:
        - type: text
          text: Amy Level 2!
          style: level_up_header
          z: 2
    amy_level_up3:
        - type: text
          text: Amy Level 3!
          style: level_up_header
          z: 2
#points widgets:
    500_points:
        - type: text
          text: 500 points
          z: 2
          style: level_up_award1
    1000_points:
        - type: text
          text: 1000 points
          z: 2
          style: level_up_award1
    5000_points:
        - type: text
          text: 5000 points
          z: 2
          style: level_up_award1
    20000_points:
        - type: text
          text: 20000 points
          z: 2
          style: level_up_award1
#multiplier widgets:
    fry_multiplier_plus:
        - type: text
          text: Fry Multiplier +1
          z: 2
          style: level_up_award2
    leela_multiplier_plus:
        - type: text
          text: Leela Multiplier +1
          z: 2
          style: level_up_award2
    bender_multiplier_plus:
        - type: text
          text: Bender Multiplier +1
          z: 2
          style: level_up_award2
    nibbler_multiplier_plus:
        - type: text
          text: Nibbler Multiplier +1
          z: 2
          style: level_up_award2
    amy_multiplier_plus:
        - type: text
          text: Amy Multiplier +1
          z: 2
          style: level_up_award2
    crew_multiplier_plus:
        - type: text
          text: Crew Multiplier +1
          z: 2
          style: level_up_award3
    PF_multiplier_plus_slot3:
        - type: text
          text: Playfield Multiplier +1
          z: 2
          style: level_up_award3
    PF_multiplier_plus_slot4:
        - type: text
          text: Playfield Multiplier +1
          z: 2
          style: level_up_award4

#throws an error if you leave show tokens blank, so we have some blank awards:
    blank_award:
        - type: text
          text: you shouldnt see this
          z: 0
    blank_award2:
        - type: text
          text: you shouldnt see this either
          z: 0
#other widgets for specific awards:
    award_suicide_booth:
        - type: text
          text: Suicide Booth is lit
          z: 2
          style: level_up_award4
    ball_of_dark_matter:
        - type: text
          text: 1 ball of Dark Matter
          z: 2
          style: level_up_award3


variable_player:
    leela_level2:
        leela_level: 1
        leela_multiplier: 1
        crew_multiplier: 1
        score: 500
    leela_level3:
        leela_level: 1
        leela_multiplier: 1
        score: 1000
    leela_level4:
        leela_level: 1
        leela_multiplier: 1
        score: 5000
    leela_level5:
        leela_level: 1
        leela_multiplier: 1
        crew_multiplier: 1
        score: 20000
    leela_level6:
        leela_level: 1
        leela_multiplier: 1
    leela_level7:
        leela_level: 1
        leela_multiplier: 1
    fry_level2:
        fry_level: 1
        fry_multiplier: 1
        crew_multiplier: 1
        score: 500
    fry_level3:
        fry_level: 1
        fry_multiplier: 1
        score: 1000
    fry_level4:
        fry_level: 1
        fry_multiplier: 1
        score: 5000
    fry_level5:
        fry_level: 1
        fry_multiplier: 1
        crew_multiplier: 1
        score: 20000
    fry_level6:
        fry_level: 1
        fry_multiplier: 1
    fry_level7:
        fry_level: 1
        fry_multiplier: 1
    bender_level2:
        bender_level: 1
        bender_multiplier: 1
        crew_multiplier: 1
        score: 500
    bender_level3:
        bender_level: 1
        bender_multiplier: 1
        score: 1000
    bender_level4:
        bender_level: 1
        bender_multiplier: 1
        score: 5000
    bender_level5:
        bender_level: 1
        bender_multiplier: 1
        crew_multiplier: 1
        score: 20000
    bender_level6:
        bender_level: 1
        bender_multiplier: 1
    bender_level7:
        bender_level: 1
        bender_multiplier: 1
    amy_level2:
        amy_level: 1
        amy_multiplier: 1
        crew_multiplier: 1
        score: 1000
    amy_level3:
        amy_level: 1
        amy_multiplier: 1
        score: 2000
    amy_level4:
        amy_level: 1
        amy_multiplier: 1
        score: 10000
    amy_level5:
        amy_level: 1
        amy_multiplier: 1
        crew_multiplier: 1
        score: 40000
    amy_level6:
        amy_level: 1
        amy_multiplier: 1
    amy_level7:
        amy_level: 1
        amy_multiplier: 1
    hermes_level2:
        hermes_level: 1
        hermes_multiplier: 1
        crew_multiplier: 1
        bonus_multiplier: 1
        score: 500
    hermes_level3:
        hermes_level: 1
        hermes_multiplier: 1
        bonus_multiplier: 2
        score: 1000
    hermes_level4:
        hermes_level: 1
        hermes_multiplier: 1
        bonus_multiplier: 3
        score: 5000
    hermes_level5:
        hermes_level: 1
        hermes_multiplier: 1
        crew_multiplier: 1
        bonus_multiplier: 4
        score: 20000
    hermes_level6:
        hermes_level: 1
        hermes_multiplier: 1
        bonus_multiplier: 5
    hermes_level7:
        hermes_level: 1
        hermes_multiplier: 1
        bonus_multiplier: 6
    nibbler_level2:
        nibbler_level: 1
        nibbler_multiplier: 1
        crew_multiplier: 1
        score: 500
    nibbler_level3:
        nibbler_level: 1
        nibbler_multiplier: 1
        score: 1000
        dark_matter: 1
    nibbler_level4:
        nibbler_level: 1
        nibbler_multiplier: 1
        score: 5000
    nibbler_level5:
        nibbler_level: 1
        nibbler_multiplier: 1
        crew_multiplier: 1
        score: 20000
    nibbler_level6:
        nibbler_level: 1
        nibbler_multiplier: 1
    nibbler_level7:
        nibbler_level: 1
        nibbler_multiplier: 1
    zoidberg_level2:
        zoidberg_level: 1
        zoidberg_multiplier: 1
        crew_multiplier: 1
        score: 500
    zoidberg_level3:
        zoidberg_level: 1
        zoidberg_multiplier: 1
        score: 1000
    zoidberg_level4:
        zoidberg_level: 1
        zoidberg_multiplier: 1
        score: 5000
    zoidberg_level5:
        zoidberg_level: 1
        zoidberg_multiplier: 1
        crew_multiplier: 1
        score: 20000
    zoidberg_level6:
        zoidberg_level: 1
        zoidberg_multiplier: 1
    zoidberg_level7:
        zoidberg_level: 1
        zoidberg_multiplier: 1
    professor_level2:
        professor_level: 1
        professor_multiplier: 1
        crew_multiplier: 1
        score: 500
    professor_level3:
        professor_level: 1
        professor_multiplier: 1
        score: 1000
    professor_level4:
        professor_level: 1
        professor_multiplier: 1
        score: 5000
    professor_level5:
        professor_level: 1
        professor_multiplier: 1
        crew_multiplier: 1
        score: 20000
    professor_level6:
        professor_level: 1
        professor_multiplier: 1
    professor_level7:
        professor_level: 1
        professor_multiplier: 1
